<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Health-GPS: Pin old Boost versions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Health-GPS
   &#160;<span id="projectnumber">1.2.2.0</span>
   </div>
   <div id="projectbrief">Global Health Policy Simulation model (Health-GPS)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_healthgps_healthgps_vcpkg_docs_examples_modify_baseline_to_pin_old_boost.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Pin old Boost versions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document will teach you how to set versions of meta-packages like <code>boost</code> or <code>qt5</code>.</p>
<p><b>What is a meta-package?</b> In vcpkg we call meta-packages to ports that by themselves don't install anything but that instead forward installation to another port or ports. The reasons for these meta-packages to exist are plenty: to install different versions of a library depending on platform or to conveniently install/uninstall a catalog of related packages (Boost and Qt).</p>
<p>In the case of Boost, it is unlikely that a user requires all of the 140+ Boost libraries in their project. For the sake of convenience, vcpkg splits Boost into multiple sub-packages broken down to individual libraries. By doing so, users can limit the subset of Boost libraries that they depend on.</p>
<p>If a user wants to install all of the Boost libraries available in vcpkg, they can do so by installing the <code>boost</code> meta-package.</p>
<p>Due to the nature of meta-packages, some unexpected issues arise when trying to use them with versioning. If a user writes the following manifest file:</p>
<p><code>vcpkg.json</code> </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;demo&quot;,</div>
<div class="line">    &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">    &quot;builtin-baseline&quot;: &quot;787fe1418ea968913cc6daf11855ffd8b0b5e9d4&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [ &quot;boost-tuple&quot; ],</div>
<div class="line">    &quot;overrides&quot;: [</div>
<div class="line">        { &quot;name&quot;: &quot;boost&quot;, &quot;version&quot;: &quot;1.72.0&quot; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>The resulting installation plan is: </p><div class="fragment"><div class="line">The following packages will be built and installed:</div>
<div class="line">    boost-assert[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-assert\3393715b4ebe30fe1c3b68acf7f84363e611f156</div>
<div class="line">    boost-compatibility[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-compatibility\cda5675366367789659c59aca65fc57d03c51deb</div>
<div class="line">    boost-config[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-config\ca82ca1b9c1739c91f3cf42c68cee56c896ae6bd</div>
<div class="line">    boost-container-hash[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-container-hash\bf472c23d29c3d80b562c43471eb92cea998f372</div>
<div class="line">    boost-core[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-core\20a19f6ece37686a02eed33e1f58add8b7a2582a</div>
<div class="line">    boost-detail[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-detail\96744251f025f9b3c856a275dfc338031876777b</div>
<div class="line">    boost-integer[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-integer\de70ce0d1500df1eda3496c4f98f42f5db256b4a</div>
<div class="line">    boost-io[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-io\7bf3407372f8fc2a99321d24a0e952d44fe25bf3</div>
<div class="line">    boost-preprocessor[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-preprocessor\8d78b8ba2e9f54cb00137115ddd2ffec1c63c149</div>
<div class="line">    boost-static-assert[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-static-assert\2a41c4703c7122de25b1c60510c43edc9371f63d</div>
<div class="line">    boost-throw-exception[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-throw-exception\b13bdf32a20786a0165cc20205ef63765cac0627</div>
<div class="line">    boost-tuple[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-tuple\22e3d000a178a88992c430d8ae8a0244c7dea674</div>
<div class="line">    boost-type-traits[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-type-traits\8829793f6c6c913257314caa317599f8d253a5ca</div>
<div class="line">    boost-uninstall[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-uninstall\08933bad27b6d41caef0940c31e2069ecb6a079c</div>
<div class="line">    boost-utility[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-utility\47572946bf6a63c731b9c4142eecb8bef3d3b270</div>
<div class="line">    boost-vcpkg-helpers[core]:x64-windows -&gt; 7#2 -- D:\vcpkg\buildtrees\versioning\versions\boost-vcpkg-helpers\2a21e5ab45d1ce41c185faf85dff0670ea6def1d</div>
</div><!-- fragment --><p>It is reasonable to expect that overriding <code>boost</code> to version 1.72.0 results in all Boost packages being pinned to version 1.72.0. <b>However, vcpkg does not treat the <code>boost</code> meta-package any differently that any other port.</b> In other words, vcpkg has no notion that <code>boost</code> is related to all the other <code>boost-*</code> libraries, other than it depends on all of them. For this reason, all the other boost packages are installed at version 1.75.0, which is the baseline version.</p>
<p>Below, we describe two methods to pin down Boost versions effectively.</p>
<h1><a class="anchor" id="autotoc_md2992"></a>
Method 1: Pin specific packages</h1>
<p>Use <code>"overrides"</code> to force specific versions in a package-by-package basis.</p>
<p><code>vcpkg.json</code> </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;demo&quot;,</div>
<div class="line">    &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">    &quot;builtin-baseline&quot;: &quot;787fe1418ea968913cc6daf11855ffd8b0b5e9d4&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [ &quot;boost-tuple&quot; ],</div>
<div class="line">    &quot;overrides&quot;: [</div>
<div class="line">        { &quot;name&quot;: &quot;boost-core&quot;, &quot;version&quot;: &quot;1.72&quot; },</div>
<div class="line">        { &quot;name&quot;: &quot;boost-integer&quot;, &quot;version&quot;: &quot;1.72&quot; },</div>
<div class="line">        { &quot;name&quot;: &quot;boost-io&quot;, &quot;version&quot;: &quot;1.72&quot; },</div>
<div class="line">        { &quot;name&quot;: &quot;boost-tuple&quot;, &quot;version&quot;: &quot;1.72&quot; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>This method allows you to quickly set the specific versions you want, but you will need to write an override for each package. Boost libraries are also heavily interdependent, which means that you may end up writing a lot of override lines.</p>
<p>The second method makes it easy to pin the entire Boost collection and end up with a very simple manifest file.</p>
<h1><a class="anchor" id="autotoc_md2993"></a>
Method 2: Modify baseline</h1>
<p>An easy way to set the version for the entirety of boost is to use the <code>"builtin-baseline"</code> property.</p>
<p>As of right now, it is only possible to go back to Boost version <code>1.75.0</code> using a baseline, since that was the contemporary Boost version when the versioning feature was merged. <b>But, it is possible to modify the baseline to whatever you like and use that instead.</b></p>
<h2><a class="anchor" id="autotoc_md2994"></a>
Step 1: Create a new branch</h2>
<p>As described in the versioning documentation. The value that goes in <code>"builtin-baseline"</code> is a git commit in the microsoft/vcpkg repository's history. If you want to customize the baseline and have control over the vcpkg instance, you can create a new commit with said custom baseline.</p>
<p>Let's start by creating a new branch to hold our modified baseline.</p>
<p>In the directory containing your clone of the vcpkg Git repository run:</p>
<div class="fragment"><div class="line">git checkout -b custom-boost-baseline</div>
</div><!-- fragment --><p>This will create a new branch named <code>custom-boost-baseline</code> and check it out immediately.</p>
<h2><a class="anchor" id="autotoc_md2995"></a>
Step 2: Modify the baseline</h2>
<p>The next step is to modify the baseline file, open the file in your editor of choice and modify the entries for the Boost libraries.</p>
<p>Change the <code>"baseline"</code> version to your desired version. <em>NOTE: Remember to also set the port versions to 0 (or your desired version).</em></p>
<p><code>${vcpkg-root}/versions/baseline.json</code> </p><div class="fragment"><div class="line">...</div>
<div class="line">     &quot;boost&quot;: {</div>
<div class="line">-      &quot;baseline&quot;: &quot;1.75.0&quot;,</div>
<div class="line">+      &quot;baseline&quot;: &quot;1.72.0&quot;,</div>
<div class="line">       &quot;port-version&quot;: 0</div>
<div class="line">     },</div>
<div class="line">     &quot;boost-accumulators&quot;: {</div>
<div class="line">-      &quot;baseline&quot;: &quot;1.75.0&quot;,</div>
<div class="line">-      &quot;port-version&quot;: 1</div>
<div class="line">+      &quot;baseline&quot;: &quot;1.72.0&quot;,</div>
<div class="line">+      &quot;port-version&quot;: 0</div>
<div class="line">     },</div>
<div class="line">     &quot;boost-algorithm&quot;: {</div>
<div class="line">-      &quot;baseline&quot;: &quot;1.75.0&quot;,</div>
<div class="line">+      &quot;baseline&quot;: &quot;1.72.0&quot;,</div>
<div class="line">       &quot;port-version&quot;: 0</div>
<div class="line">     },</div>
<div class="line">     &quot;boost-align&quot;: {</div>
<div class="line">-      &quot;baseline&quot;: &quot;1.75.0&quot;,</div>
<div class="line">+      &quot;baseline&quot;: &quot;1.72.0&quot;,</div>
<div class="line">       &quot;port-version&quot;: 0</div>
<div class="line">     },</div>
<div class="line">...</div>
<div class="line">    &quot;boost-uninstall: {</div>
<div class="line">        &quot;baseline&quot;: &quot;1.75.0&quot;,</div>
<div class="line">        &quot;port-version&quot;: 0</div>
<div class="line">    },</div>
<div class="line">...</div>
</div><!-- fragment --><p>Some <code>boost-</code> packages are helpers used by vcpkg and are not part of Boost. For example, <code>"boost-uninstall"</code> is a vcpkg helper to conveniently uninstall all Boost libraries, but it didn't exist for Boost version <code>1.72.0</code>, in this case it is fine to leave it at <code>1.75.0</code> to avoid baseline errors (since all versions in <code>baseline.json</code> must have existed).</p>
<h2><a class="anchor" id="autotoc_md2996"></a>
Step 3: Commit your changes</h2>
<p>After saving your modified file, run these commands to commit your changes:</p>
<div class="fragment"><div class="line">git add versions/baseline.json</div>
<div class="line">git commit -m &quot;Baseline Boost 1.72.0&quot;</div>
</div><!-- fragment --><p>You can set the commit message to whatever you want, just make it useful for you.</p>
<h2><a class="anchor" id="autotoc_md2997"></a>
Step 4: Get your baseline commit SHA</h2>
<p>Once all your changes are ready, you can get the commit SHA by running: </p><div class="fragment"><div class="line">git rev-parse HEAD</div>
</div><!-- fragment --><p>The output of that command will be the commit SHA you need to put as the <code>"builtin-baseline"</code> in your project's manifest file. Copy the 40-hex digits and save them to use later in your manifest file.</p>
<h2><a class="anchor" id="autotoc_md2998"></a>
Step 5: (Optional) Go back to the main repository branch</h2>
<p>Once your changes have been committed locally, you can refer to the commit SHA regardless of the repository branch you're working on. So, let's go back to the main vcpkg repository branch.</p>
<div class="fragment"><div class="line">git checkout master</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2999"></a>
Step 6: Create your manifest file with your custom baseline</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;demo&quot;,</div>
<div class="line">    &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">    &quot;builtin-baseline&quot;: &quot;9b5cf7c3d9376ddf43429671282972ec4f99aa85&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [ &quot;boost-tuple&quot; ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>In this example, commit SHA <code>9b5cf7c3d9376ddf43429671282972ec4f99aa85</code> is the commit ID with the modified baseline. Even when a different branch (<code>master</code> in this case) is checked out, Git is able to find the commit as long as the branch with the modified baseline exists (the <code>custom-boost-baseline</code> branch we created in step 1).</p>
<p>We run <code>vcpkg install</code> in the directory containing our manifest file and the output looks like this:</p>
<div class="fragment"><div class="line">The following packages will be built and installed:</div>
<div class="line">    boost-assert[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-assert\6754398591f48435b28014ca0d60e5375a4c04d1</div>
<div class="line">    boost-compatibility[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-compatibility\9893ff3c554575bc712df4108a949e07b269f401</div>
<div class="line">    boost-config[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-config\de2784767046b06ec31eb718f10df512e51f2aad</div>
<div class="line">    boost-container-hash[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-container-hash\cc19fb0154bbef188f309f49b2664ec7623b96b6</div>
<div class="line">    boost-core[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-core\0eb5e20df9e267e9eca325be946f52ceb8a60229</div>
<div class="line">    boost-detail[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-detail\759d7c6a3f9dbaed0b0c69fa0bb764f7606bb02d</div>
<div class="line">    boost-integer[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-integer\173956c61a26e83b0f8b58b0baf60f06aeee637c</div>
<div class="line">    boost-preprocessor[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-preprocessor\86eb3938b7875f124feb845331dbe84cbab5d1c6</div>
<div class="line">    boost-static-assert[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-static-assert\e82d8f7f3ee07e927dc374f5a08ed6d6f4ef81f4</div>
<div class="line">    boost-throw-exception[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-throw-exception\64df295f7df41de4fcb219834889b126b5020def</div>
<div class="line">    boost-tuple[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-tuple\b3e1b01ffce6e367e4fed0a5538a8546abacb6b2</div>
<div class="line">    boost-type-traits[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-type-traits\5e44ec657660eccf4d3b2710b092dd238e1e7a2d</div>
<div class="line">    boost-uninstall[core]:x64-windows -&gt; 1.75.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-uninstall\08933bad27b6d41caef0940c31e2069ecb6a079c</div>
<div class="line">    boost-utility[core]:x64-windows -&gt; 1.72.0 -- D:\vcpkg\buildtrees\versioning\versions\boost-utility\7d721b2458d5d595ac341eb54883274f38a4b8c2</div>
<div class="line">    boost-vcpkg-helpers[core]:x64-windows -&gt; 7#2 -- D:\vcpkg\buildtrees\versioning\versions\boost-vcpkg-helpers\2a21e5ab45d1ce41c185faf85dff0670ea6def1d</div>
</div><!-- fragment --><p>Notice how simple our manifest file has become, instead of having a multitude of <code>"overrides"</code> you can pin down all Boost packages just by setting the <code>"builtin-baseline"</code> to be your modified baseline commit SHA. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
