<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Health-GPS: Unchecked access: operator[]</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Health-GPS
   &#160;<span id="projectnumber">1.2.2.0</span>
   </div>
   <div id="projectbrief">Global Health Policy Simulation model (Health-GPS)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_healthgps_healthgps_vcpkg_buildtrees_nlohmann_json_src_v3_11_2_efdad4750e_c09092b6547322aac2912a0b8c080682e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Unchecked access: operator[] </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md2163"></a>
Overview</h1>
<p>Elements in a JSON object and a JSON array can be accessed via ../../api/basic_json/operator%5B%5D.md "`operator[]`" similar to a <code>#!cpp std::map</code> and a <code>#!cpp std::vector</code>, respectively.</p>
<p>??? example "Read access" </p><pre class="fragment">Consider the following JSON value:

```json
{
    "name": "Mary Smith",
    "age": 42,
    "hobbies": ["hiking", "reading"]
}
```

Assume the value is parsed to a `json` variable `j`.

| expression              | value                                                                        |
|-------------------------|------------------------------------------------------------------------------|
| `#!cpp j`               | `#!json {"name": "Mary Smith", "age": 42, "hobbies": ["hiking", "reading"]}` |
| `#!cpp j["name"]`       | `#!json "Mary Smith"`                                                        |
| `#!cpp j["age"]`        | `#!json 42`                                                                  |
| `#!cpp j["hobbies"]`    | `#!json ["hiking", "reading"]`                                               |
| `#!cpp j["hobbies"][0]` | `#!json "hiking"`                                                            |
| `#!cpp j["hobbies"][1]` | `#!json "reading"`                                                           |
</pre><p> The return value is a reference, so it can modify the original value. In case the passed object key is non-existing, a <code>#!json null</code> value is inserted which can be immediately be overwritten.</p>
<p>??? example "Write access" </p><pre class="fragment">```cpp
j["name"] = "John Smith";
j["maidenName"] = "Jones";
```

This code produces the following JSON value:

```json
{
    "name": "John Smith",
    "maidenName": "Jones",
    "age": 42,
    "hobbies": ["hiking", "reading"]
}
```
</pre><p> When accessing an invalid index (i.e., an index greater than or equal to the array size), the JSON array is resized such that the passed index is the new maximal index. Intermediate values are filled with <code>#!json null</code>.</p>
<p>??? example "Filling up arrays with `#!json null` values" </p><pre class="fragment">```cpp
j["hobbies"][0] = "running";
j["hobbies"][3] = "cooking";
```

This code produces the following JSON value:

```json
{
    "name": "John Smith",
    "maidenName": "Jones",
    "age": 42,
    "hobbies": ["running", "reading", null, "cooking"]
}
```
</pre> <h1><a class="anchor" id="autotoc_md2164"></a>
Notes</h1>
<p>!!! info "Design rationale" </p><pre class="fragment">The library behaves differently to `#!cpp std::vector` and `#!cpp std::map`:

- `#!cpp std::vector::operator[]` never inserts a new element.
- `#!cpp std::map::operator[]` is not available for const values.

The type `#!cpp json` wraps all JSON value types. It would be impossible to remove
[`operator[]`](../../api/basic_json/operator%5B%5D.md) for const objects. At the same time, inserting elements for
non-const objects is really convenient as it avoids awkward `insert` calls. To this end, we decided to have an
inserting non-const behavior for both arrays and objects.
</pre><p> !!! info </p><pre class="fragment">The access is unchecked. In case the passed object key does not exist or the passed array index is invalid, no
exception is thrown.
</pre><p> !!! danger </p><pre class="fragment">- It is **undefined behavior** to access a const object with a non-existing key.
- It is **undefined behavior** to access a const array with an invalid index.
- In debug mode, an **assertion** will fire in both cases. You can disable assertions by defining the preprocessor
  symbol `#!cpp NDEBUG` or redefine the macro [`JSON_ASSERT(x)`](../macros.md#json_assertx). See the documentation
  on [runtime assertions](../assertions.md) for more information.
</pre><p> !!! failure "Exceptions" </p><pre class="fragment">`operator[]` can only be used with objects (with a string argument) or with arrays (with a numeric argument). For
other types, a [`basic_json::type_error`](../../home/exceptions.md#jsonexceptiontype_error305) is thrown.
</pre> <h1><a class="anchor" id="autotoc_md2165"></a>
Summary</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">scenario   </th><th class="markdownTableHeadNone">non-const value   </th><th class="markdownTableHeadNone">const value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">access to existing object key   </td><td class="markdownTableBodyNone">reference to existing value is returned   </td><td class="markdownTableBodyNone">const reference to existing value is returned    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">access to valid array index   </td><td class="markdownTableBodyNone">reference to existing value is returned   </td><td class="markdownTableBodyNone">const reference to existing value is returned    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">access to non-existing object key   </td><td class="markdownTableBodyNone">reference to newly inserted <code>#!json null</code> value is returned   </td><td class="markdownTableBodyNone"><b>undefined behavior</b>; <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_buildtrees_nlohmann_json_src_v3_11_2_efdad4750e_c2fde0d5cded6950da783e8ca4d843413.html">runtime assertion</a> in debug mode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">access to invalid array index   </td><td class="markdownTableBodyNone">reference to newly inserted <code>#!json null</code> value is returned; any index between previous maximal index and passed index are filled with <code>#!json null</code>   </td><td class="markdownTableBodyNone"><b>undefined behavior</b>; <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_buildtrees_nlohmann_json_src_v3_11_2_efdad4750e_c2fde0d5cded6950da783e8ca4d843413.html">runtime assertion</a> in debug mode   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
