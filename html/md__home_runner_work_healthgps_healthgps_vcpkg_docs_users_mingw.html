<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Health-GPS: Vcpkg and Mingw-w64</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Health-GPS
   &#160;<span id="projectnumber">1.2.2.0</span>
   </div>
   <div id="projectbrief">Global Health Policy Simulation model (Health-GPS)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_healthgps_healthgps_vcpkg_docs_users_mingw.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Vcpkg and Mingw-w64 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>The latest version of this documentation is available on <a href="https://github.com/Microsoft/vcpkg/tree/master/docs/users/mingw.md">GitHub</a>.</b></p>
<p><em>MinGW is not tested as part of vcpkg repository's CI process, so regressions can occur as part of library updates. PRs improving support are welcome!</em></p>
<h1><a class="anchor" id="autotoc_md3784"></a>
Table of Contents</h1>
<ul>
<li><a href="#mingw-w64-community-triplets">Mingw-w64 community triplets</a></li>
<li><a href="#mingw-native">Using Mingw-w64 natively on Windows</a><ul>
<li><a href="#how-to-avoid-mixing-different-installations">How to avoid mixing different installations</a></li>
</ul>
</li>
<li><a href="#mingw-cross">Using Mingw-w64 to build Windows programs on other systems</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md3785"></a>
Mingw-w64 community triplets</h1>
<p>Vcpkg includes <a href="https://github.com/microsoft/vcpkg/tree/master/triplets/community">x64, x86, arm64 and arm community triplets</a> for <a href="http://mingw-w64.org/">Mingw-w64</a>. They don't depend on Visual Studio and can be used natively on Windows as well as for cross-compiling on other operating systems. There are two variants of each triplet, selecting between static and dynamic linking. The actual tools (g++ etc.) are expected to be named with particular prefixes.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">architecture   </th><th class="markdownTableHeadNone">vcpkg community triplets   </th><th class="markdownTableHeadNone">tool name prefix    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">x64   </td><td class="markdownTableBodyNone">x64-mingw-dynamic, x64-mingw-static   </td><td class="markdownTableBodyNone">x86_64-w64-mingw32-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">x86   </td><td class="markdownTableBodyNone">x86-mingw-dynamic, x86-mingw-static   </td><td class="markdownTableBodyNone">i686-w64-mingw32-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">arm64   </td><td class="markdownTableBodyNone">arm64-mingw-dynamic, arm64-mingw-static   </td><td class="markdownTableBodyNone">aarch64-w64-mingw32-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">arm   </td><td class="markdownTableBodyNone">arm-mingw-dynamic, arm-mingw-static   </td><td class="markdownTableBodyNone">armv7-w64-mingw32-   </td></tr>
</table>
<p>These triplets are not tested by continuous integration, so many ports do not build, and even existing ports may break on port updates. Because of this, community involvement is paramount!</p>
<ul>
<li><a href="https://github.com/microsoft/vcpkg/discussions?discussions_q=mingw">Discussions</a></li>
<li><a href="https://github.com/microsoft/vcpkg/issues?q=is%3Aissue+is%3Aopen+mingw">Open issues</a></li>
<li><a href="https://github.com/microsoft/vcpkg/pulls?q=is%3Apr+is%3Aopen+mingw">Open pull requests</a></li>
</ul>
<p><a class="anchor" id="mingw-native"></a> </p>
<h1><a class="anchor" id="autotoc_md3786"></a>
Using Mingw-w64 natively on Windows</h1>
<p>With <a href="https://www.msys2.org/">MSYS2</a>, it is possible to easily create a full environment for building ports with Mingw-w64 on a Windows PC.</p>
<p>Note that for building software for native windows environments, you must use a mingw subsystem of MSYS2, and install some packages (with a specific prefix) for this subsystem.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">architecture   </th><th class="markdownTableHeadNone">vcpkg triplets   </th><th class="markdownTableHeadNone">subsystem   </th><th class="markdownTableHeadNone">package prefix    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">x64   </td><td class="markdownTableBodyNone">x64-mingw-dynamic, x64-mingw-static   </td><td class="markdownTableBodyNone">mingw64   </td><td class="markdownTableBodyNone">mingw-w64-x86_64-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">x86   </td><td class="markdownTableBodyNone">x86-mingw-dynamic, x86-mingw-static   </td><td class="markdownTableBodyNone">mingw32   </td><td class="markdownTableBodyNone">mingw-w64-i686-   </td></tr>
</table>
<p>After the basic installation of MSYS2, you will need to install a few additional packages for software development, e.g. for x64:</p>
<div class="fragment"><div class="line">pacman -S --needed git base-devel mingw-w64-x86_64-toolchain</div>
</div><!-- fragment --><p>The active subsystem is selected by running the MSYS2 MinGW app, or changed in a running terminal by</p>
<div class="fragment"><div class="line">source shell mingw64   # for x64, or &quot;mingw32&quot; for x86</div>
</div><!-- fragment --><p>The bootstrapping of vcpkg shall be done by running bootstrap-vcpkg.bat. This will download the official vcpkg.exe.</p>
<div class="fragment"><div class="line">git clone https://github.com/microsoft/vcpkg.git</div>
<div class="line">cd vcpkg</div>
<div class="line">./bootstrap-vcpkg.bat</div>
</div><!-- fragment --><p>For building packages, you need to tell vcpkg that you want to use the mingw triplet. This can be done in different ways. When Visual Studio is not installed, you must also set the host triplet to mingw. This is needed to resolve host dependencies. For convenience, you can use environment variables to set both triplets:</p>
<div class="fragment"><div class="line">export VCPKG_DEFAULT_TRIPLET=x64-mingw-dynamic</div>
<div class="line">export VCPKG_DEFAULT_HOST_TRIPLET=x64-mingw-dynamic</div>
</div><!-- fragment --><p>Now you can test your setup:</p>
<div class="fragment"><div class="line">./vcpkg install zlib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3787"></a>
How to avoid mixing different installations</h2>
<p><a href="https://www.msys2.org/wiki/MSYS2-introduction/#path">The MSYS2 project explicitly warns</a> that "mixing in programs from other MSYS2 installations, Cygwin installations, compiler toolchains or even various other programs is not supported and will probably break things in unexpected ways." For example, the proper passing of command line arguments with quoting and escaping may fail.</p>
<p>But Vcpkg ports implicitly create MSYS2 installations, e.g. for <code>pkg-config</code> and for various other build tools needed to deal with packages based on autoconf. In particular, when ports prepend the directory of tools to the <code>PATH</code> environment variable, this may change which tool with a particular name is actually invoked, and how arguments are passed between tools.</p>
<p>To mitigate such issues when working with a full MSYS2 installation, try to keep the directories of the msys subsystem (<code>/usr/bin</code>, <code>bin</code>) out of the <code>PATH</code> environment variable as found by vcpkg. In bash, you may modify the <code>PATH</code> just for a single call of vcpkg:</p>
<div class="fragment"><div class="line">PATH=&quot;${PATH/:\/usr\/bin:\/bin:/:}&quot; ./vcpkg install libpq</div>
</div><!-- fragment --><p>Alternatively, you may run vcpkg from a regular Command Prompt, after adding <em>only</em> the desired mingw directory (e.g. <code>C:\msys64\mingw64\bin</code>) to the <code>PATH</code>.</p>
<p>When using vcpkg for CI with standard images on Azure Pipelines, Github Actions or similar, note that the default <code>PATH</code> might contain more directories which create a mix of MSYS2 programs from different installations. You may want to set the desired <code>PATH</code> manually, or remove directories which contain <code>sh.exe</code>, <code>bash.exe</code>, <code>msys-2.0.dll</code> or <code>cygwin1.dll</code>.</p>
<p><a class="anchor" id="mingw-cross"></a> </p>
<h1><a class="anchor" id="autotoc_md3788"></a>
Using Mingw-w64 to build Windows programs on other systems</h1>
<p>You can use the vcpkg mingw community triplets with toolchains on non-Windows computers to cross-compile software to be run on Windows. Many Linux distributions offer such toolchains in optional packages with a mingw-w64 <a href="https://repology.org/projects/?search=-mingw-w64">suffix</a> or <a href="https://repology.org/projects/?search=mingw-w64-">prefix</a>. As an example, for Debian-based distributions, you would start with this installation command for the x64 toolchain:</p>
<div class="fragment"><div class="line">sudo apt-get install gcc-mingw-w64-x86-64 g++-mingw-w64-x86-64</div>
</div><!-- fragment --><p>Note that the packaged versions of Mingw-w64 toolchains on Linux distributions might be older releases which lack some useful features or bug fixes. An alternative independent toolchain is offered by <a href="https://mxe.cc/">MXE</a>.</p>
<p>For vcpkg bootstrapping, clone the github repository and run the <code>bootstrap-vcpkg.sh</code> script:</p>
<div class="fragment"><div class="line">git clone https://github.com/microsoft/vcpkg.git</div>
<div class="line">cd vcpkg</div>
<div class="line">./bootstrap-vcpkg.sh</div>
<div class="line">./vcpkg install zlib:x64-mingw-dynamic</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
