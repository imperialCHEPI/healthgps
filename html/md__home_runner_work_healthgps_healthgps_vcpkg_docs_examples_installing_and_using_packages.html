<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Health-GPS: Installing and Using Packages Example: SQLite</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Health-GPS
   &#160;<span id="projectnumber">1.2.2.0</span>
   </div>
   <div id="projectbrief">Global Health Policy Simulation model (Health-GPS)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_healthgps_healthgps_vcpkg_docs_examples_installing_and_using_packages.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installing and Using Packages Example: SQLite </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>Note: this old example uses Classic Mode, but most developers will be happier with Manifest Mode. See <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_examples_manifest_mode_cmake.html">Manifest Mode: CMake Example</a> for an example of converting to Manifest Mode.</em></p>
<ul>
<li><a href="#install">Step 1: Install</a></li>
<li><a href="#use">Step 2: Use</a><ul>
<li><a href="#msbuild">VS/MSBuild Project (User-wide integration)</a></li>
<li><a href="#cmake">CMake (Toolchain file)</a></li>
<li><a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_users_buildsystems_integration.html">Other integration options</a></li>
</ul>
</li>
</ul>
<hr  />
<p> <a class="anchor" id="install"></a> </p>
<h1><a class="anchor" id="autotoc_md2982"></a>
Step 1: Install</h1>
<p>First, we need to know what name <a href="https://sqlite.org">SQLite</a> goes by in the ports tree. To do that, we'll run the <code>search</code> command and inspect the output: </p><div class="fragment"><div class="line">PS D:\src\vcpkg&gt; .\vcpkg search sqlite</div>
<div class="line">libodb-sqlite        2.4.0            Sqlite support for the ODB ORM library</div>
<div class="line">sqlite3              3.32.1           SQLite is a software library that implements a se...</div>
<div class="line"> </div>
<div class="line">If your library is not listed, please open an issue at:</div>
<div class="line">    https://github.com/Microsoft/vcpkg/issues</div>
</div><!-- fragment --><p> Looking at the list, we can see that the port is named "sqlite3". You can also run the <code>search</code> command without arguments to see the full list of packages.</p>
<p>Installing is then as simple as using the <code>install</code> command. </p><div class="fragment"><div class="line">PS D:\src\vcpkg&gt; .\vcpkg install sqlite3</div>
<div class="line">Computing installation plan...</div>
<div class="line">The following packages will be built and installed:</div>
<div class="line">    sqlite3[core]:x86-windows</div>
<div class="line">Starting package 1/1: sqlite3:x86-windows</div>
<div class="line">Building package sqlite3[core]:x86-windows...</div>
<div class="line">-- Downloading https://sqlite.org/2020/sqlite-amalgamation-3320100.zip...</div>
<div class="line">-- Extracting source C:/src/vcpkg/downloads/sqlite-amalgamation-3320100.zip</div>
<div class="line">-- Applying patch fix-arm-uwp.patch</div>
<div class="line">-- Using source at C:/src/vcpkg/buildtrees/sqlite3/src/3320100-15aeda126a.clean</div>
<div class="line">-- Configuring x86-windows</div>
<div class="line">-- Building x86-windows-dbg</div>
<div class="line">-- Building x86-windows-rel</div>
<div class="line">-- Performing post-build validation</div>
<div class="line">-- Performing post-build validation done</div>
<div class="line">Building package sqlite3[core]:x86-windows... done</div>
<div class="line">Installing package sqlite3[core]:x86-windows...</div>
<div class="line">Installing package sqlite3[core]:x86-windows... done</div>
<div class="line">Elapsed time for package sqlite3:x86-windows: 12 s</div>
<div class="line"> </div>
<div class="line">Total elapsed time: 12.04 s</div>
<div class="line"> </div>
<div class="line">The package sqlite3:x86-windows provides CMake targets:</div>
<div class="line"> </div>
<div class="line">    find_package(unofficial-sqlite3 CONFIG REQUIRED)</div>
<div class="line">    target_link_libraries(main PRIVATE unofficial::sqlite3::sqlite3))</div>
</div><!-- fragment --><p>We can check that sqlite3 was successfully installed for x86 Windows desktop by running the <code>list</code> command. </p><div class="fragment"><div class="line">PS D:\src\vcpkg&gt; .\vcpkg list</div>
<div class="line">sqlite3:x86-windows         3.32.1           SQLite is a software library that implements a se...</div>
</div><!-- fragment --><p>To install for other architectures and platforms such as Universal Windows Platform or x64 Desktop, you can suffix the package name with <code>:&lt;target&gt;</code>. </p><div class="fragment"><div class="line">PS D:\src\vcpkg&gt; .\vcpkg install sqlite3:x86-uwp zlib:x64-windows</div>
</div><!-- fragment --><p>See <code>.\vcpkg help triplet</code> for all supported targets.</p>
<hr  />
<p> <a class="anchor" id="use"></a> </p>
<h1><a class="anchor" id="autotoc_md2984"></a>
Step 2: Use</h1>
<p><a class="anchor" id="msbuild"></a> </p>
<h3><a class="anchor" id="autotoc_md2985"></a>
VS/MSBuild Project (User-wide integration)</h3>
<p>The recommended and most productive way to use vcpkg is via user-wide integration, making the system available for all projects you build. The user-wide integration will prompt for administrator access the first time it is used on a given machine, but afterwards is no longer required and the integration is configured on a per-user basis. </p><div class="fragment"><div class="line">PS D:\src\vcpkg&gt; .\vcpkg integrate install</div>
<div class="line">Applied user-wide integration for this vcpkg root.</div>
<div class="line"> </div>
<div class="line">All C++ projects can now #include any installed libraries.</div>
<div class="line">Linking will be handled automatically.</div>
<div class="line">Installing new libraries will make them instantly available.</div>
</div><!-- fragment --><p> <em>Note: You will need to restart Visual Studio or perform a Build to update intellisense with the changes.</em></p>
<p>You can now simply use File -&gt; New Project in Visual Studio and the library will be automatically available. For SQLite, you can try out their <a href="https://sqlite.org/quickstart.html">C/C++ sample</a>.</p>
<p>To remove the integration for your user, you can use <code>.\vcpkg integrate remove</code>.</p>
<p><a class="anchor" id="cmake"></a> </p>
<h3><a class="anchor" id="autotoc_md2986"></a>
CMake (Toolchain File)</h3>
<p>The best way to use installed libraries with cmake is via the toolchain file <code>scripts\buildsystems\vcpkg.cmake</code>. To use this file, you simply need to add it onto your CMake command line as: <br  />
 <code>-DCMAKE_TOOLCHAIN_FILE=D:\src\vcpkg\scripts\buildsystems\vcpkg.cmake</code>.</p>
<p>If you are using CMake through Open Folder with Visual Studio you can define <code>CMAKE_TOOLCHAIN_FILE</code> by adding a "variables" section to each of your <code>CMakeSettings.json</code> configurations:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;configurations&quot;: [{</div>
<div class="line">    &quot;name&quot;: &quot;x86-Debug&quot;,</div>
<div class="line">    &quot;generator&quot;: &quot;Visual Studio 15 2017&quot;,</div>
<div class="line">    &quot;configurationType&quot; : &quot;Debug&quot;,</div>
<div class="line">    &quot;buildRoot&quot;:  &quot;${env.LOCALAPPDATA}\\CMakeBuild\\${workspaceHash}\\build\\${name}&quot;,</div>
<div class="line">    &quot;cmakeCommandArgs&quot;: &quot;&quot;,</div>
<div class="line">    &quot;buildCommandArgs&quot;: &quot;-m -v:minimal&quot;,</div>
<div class="line">    &quot;variables&quot;: [{</div>
<div class="line">      &quot;name&quot;: &quot;CMAKE_TOOLCHAIN_FILE&quot;,</div>
<div class="line">      &quot;value&quot;: &quot;D:\\src\\vcpkg\\scripts\\buildsystems\\vcpkg.cmake&quot;</div>
<div class="line">    }]</div>
<div class="line">  }]</div>
<div class="line">}</div>
</div><!-- fragment --><p> <em>Note: It might be necessary to delete the CMake cache folder of each modified configuration, to force a full regeneration. In the <code>CMake</code> menu, under <code>Cache (&lt;configuration name&gt;)</code> you'll find <code>Delete Cache Folders</code>.</em></p>
<p>Now let's make a simple CMake project with a main file. </p><div class="fragment"><div class="line"># CMakeLists.txt</div>
<div class="line">cmake_minimum_required(VERSION 3.0)</div>
<div class="line">project(test)</div>
<div class="line"> </div>
<div class="line">find_package(unofficial-sqlite3 CONFIG REQUIRED)</div>
<div class="line"> </div>
<div class="line">add_executable(main main.cpp)</div>
<div class="line"> </div>
<div class="line">target_link_libraries(main PRIVATE unofficial::sqlite3::sqlite3)</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">// main.cpp</span></div>
<div class="line"><span class="preprocessor">#include &lt;sqlite3.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="out_2build_2linux-debug_2vcpkg__installed_2x64-linux_2src_2gtest__main_8cc.html#a7f83bdc516d2cb86e20235d94ddf055a">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="out_2build_2linux-debug_2vcpkg__installed_2x64-linux_2include_2fmt_2printf_8h.html#aa3739712ffc6e717626ef803d2782ad5">printf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, sqlite3_libversion());</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aout_2build_2linux-debug_2vcpkg__installed_2x64-linux_2include_2fmt_2printf_8h_html_aa3739712ffc6e717626ef803d2782ad5"><div class="ttname"><a href="out_2build_2linux-debug_2vcpkg__installed_2x64-linux_2include_2fmt_2printf_8h.html#aa3739712ffc6e717626ef803d2782ad5">printf</a></div><div class="ttdeci">auto printf(const S &amp;fmt, const T &amp;... args) -&gt; int</div><div class="ttdef"><b>Definition:</b> printf.h:631</div></div>
<div class="ttc" id="aout_2build_2linux-debug_2vcpkg__installed_2x64-linux_2src_2gtest__main_8cc_html_a7f83bdc516d2cb86e20235d94ddf055a"><div class="ttname"><a href="out_2build_2linux-debug_2vcpkg__installed_2x64-linux_2src_2gtest__main_8cc.html#a7f83bdc516d2cb86e20235d94ddf055a">main</a></div><div class="ttdeci">GTEST_API_ int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> gtest_main.cc:48</div></div>
</div><!-- fragment --><p>Then, we build our project in the normal CMake way: </p><div class="fragment"><div class="line">PS D:\src\cmake-test&gt; mkdir build </div>
<div class="line">PS D:\src\cmake-test&gt; cd build</div>
<div class="line">PS D:\src\cmake-test\build&gt; cmake .. &quot;-DCMAKE_TOOLCHAIN_FILE=D:\src\vcpkg\scripts\buildsystems\vcpkg.cmake&quot;</div>
<div class="line">    // omitted CMake output here //</div>
<div class="line">-- Build files have been written to: D:/src/cmake-test/build</div>
<div class="line">PS D:\src\cmake-test\build&gt; cmake --build .</div>
<div class="line">    // omitted MSBuild output here //</div>
<div class="line">Build succeeded.</div>
<div class="line">    0 Warning(s)</div>
<div class="line">    0 Error(s)</div>
<div class="line"> </div>
<div class="line">Time Elapsed 00:00:02.38</div>
<div class="line">PS D:\src\cmake-test\build&gt; .\Debug\main.exe</div>
<div class="line">3.15.0</div>
</div><!-- fragment --><p><em>Note: The correct sqlite3.dll is automatically copied to the output folder when building for x86-windows. You will need to distribute this along with your application.</em></p>
<h4><a class="anchor" id="autotoc_md2987"></a>
Handling libraries without native cmake support</h4>
<p>Unlike other platforms, we do not automatically add the <code>include\</code> directory to your compilation line by default. If you're using a library that does not provide CMake integration, you will need to explicitly search for the files and add them yourself using <a href="https://cmake.org/cmake/help/latest/command/find_path.html"><code>find_path()</code></a> and <a href="https://cmake.org/cmake/help/latest/command/find_library.html"><code>find_library()</code></a>.</p>
<div class="fragment"><div class="line"># To find and use catch</div>
<div class="line">find_path(CATCH_INCLUDE_DIR catch.hpp)</div>
<div class="line">include_directories(${CATCH_INCLUDE_DIR})</div>
<div class="line"> </div>
<div class="line"># To find and use azure-storage-cpp</div>
<div class="line">find_path(WASTORAGE_INCLUDE_DIR was/blob.h)</div>
<div class="line">find_library(WASTORAGE_LIBRARY wastorage)</div>
<div class="line">include_directories(${WASTORAGE_INCLUDE_DIR})</div>
<div class="line">link_libraries(${WASTORAGE_LIBRARY})</div>
<div class="line"> </div>
<div class="line"># Note that we recommend using the target-specific directives for a cleaner cmake:</div>
<div class="line">#     target_include_directories(main ${LIBRARY})</div>
<div class="line">#     target_link_libraries(main PRIVATE ${LIBRARY})</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
