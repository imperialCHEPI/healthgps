<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Health-GPS: Getting started with versioning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Health-GPS
   &#160;<span id="projectnumber">1.2.2.0</span>
   </div>
   <div id="projectbrief">Global Health Policy Simulation model (Health-GPS)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_healthgps_healthgps_vcpkg_docs_examples_versioning_getting_started.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Getting started with versioning </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>The latest version of this documentation is available on <a href="https://github.com/Microsoft/vcpkg/tree/master/docs/examples/versioning.getting-started.md">GitHub</a>.</b></p>
<p>Vcpkg lets you take control of which version of packages to install in your projects using manifests.</p>
<h1><a class="anchor" id="autotoc_md3022"></a>
Using versions with manifests</h1>
<p>Let's start with creating a simple CMake project that depends on <code>fmt</code> and <code>zlib</code>.</p>
<p>Create a folder with the following files:</p>
<p><b>vcpkg.json</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;versions-test&quot;,</div>
<div class="line">    &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;fmt&quot;,</div>
<div class="line">            &quot;version&gt;=&quot;: &quot;7.1.3#1&quot;</div>
<div class="line">        }, </div>
<div class="line">        &quot;zlib&quot;</div>
<div class="line">    ],</div>
<div class="line">    &quot;builtin-baseline&quot;: &quot;3426db05b996481ca31e95fff3734cf23e0f51bc&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>main.cpp</b> </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">#include &lt;fmt/core.h&gt;</div>
<div class="line">#include &lt;zlib.h&gt;</div>
<div class="line"> </div>
<div class="line">int main()</div>
<div class="line">{</div>
<div class="line">    fmt::print(&quot;fmt version is {}\n&quot;</div>
<div class="line">               &quot;zlib version is {}\n&quot;, </div>
<div class="line">               FMT_VERSION, ZLIB_VERSION);</div>
<div class="line">    return 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>CMakeLists.txt</b> </p><div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.18)</div>
<div class="line"> </div>
<div class="line">project(versionstest CXX)</div>
<div class="line"> </div>
<div class="line">add_executable(main main.cpp)</div>
<div class="line"> </div>
<div class="line">find_package(ZLIB REQUIRED)</div>
<div class="line">find_package(fmt CONFIG REQUIRED)</div>
<div class="line">target_link_libraries(main PRIVATE ZLIB::ZLIB fmt::fmt)</div>
</div><!-- fragment --><p>And now we build and run our project with CMake:</p>
<ol type="1">
<li>Create the build directory for the project. <div class="fragment"><div class="line">PS D:\versions-test&gt; mkdir build</div>
<div class="line">PS D:\versions-test&gt; cd build</div>
</div><!-- fragment --></li>
<li>Configure CMake. <br  />
 <div class="fragment"><div class="line">PS D:\versions-test\build&gt; cmake -G Ninja -DCMAKE_TOOLCHAIN_FILE=D:/vcpkg/scripts/buildsystems/vcpkg.cmake ..</div>
<div class="line">-- Running vcpkg install</div>
<div class="line">Detecting compiler hash for triplet x86-windows...</div>
<div class="line">The following packages will be built and installed:</div>
<div class="line">    fmt[core]:x64-windows -&gt; 7.1.3#1 -- D:\Work\viromer\vcpkg\buildtrees\versioning\versions\fmt\4f8427eb0bd40da1856d4e67bde39a4fda689d72</div>
<div class="line">    vcpkg-cmake[core]:x64-windows -&gt; 2021-02-26 -- D:\Work\viromer\vcpkg\buildtrees\versioning\versions\vcpkg-cmake\51896aa8073adb5c8450daa423d03eedf0dfc61f</div>
<div class="line">    vcpkg-cmake-config[core]:x64-windows -&gt; 2021-02-26 -- D:\Work\viromer\vcpkg\buildtrees\versioning\versions\vcpkg-cmake-config\d255b3d566a8861dcc99a958240463e678528066</div>
<div class="line">    zlib[core]:x64-windows -&gt; 1.2.11#9 -- D:\Work\viromer\vcpkg\buildtrees\versioning\versions\zlib\827111046e37c98153d9d82bb6fa4183b6d728e4</div>
<div class="line">...</div>
</div><!-- fragment --></li>
<li>Build the project. <div class="fragment"><div class="line">PS D:\versions-test\build&gt; cmake --build .</div>
<div class="line">[2/2] Linking CXX executable main.exe</div>
</div><!-- fragment --></li>
<li>Run it! <div class="fragment"><div class="line">PS D:\versions-test\build&gt; ./main.exe</div>
<div class="line">fmt version is 70103</div>
<div class="line">zlib version is 1.2.11</div>
</div><!-- fragment --></li>
</ol>
<p>Take a look at the output:</p>
<div class="fragment"><div class="line">fmt[core]:x86-windows -&gt; 7.1.3#1 -- D:\vcpkg\buildtrees\versioning\versions\fmt\4f8427eb0bd40da1856d4e67bde39a4fda689d72</div>
<div class="line">...</div>
<div class="line">zlib[core]:x86-windows -&gt; 1.2.11#9 -- D:\vcpkg\buildtrees\versioning\versions\zlib\827111046e37c98153d9d82bb6fa4183b6d728e4</div>
</div><!-- fragment --><p>Instead of using the portfiles in <code>ports/</code>, vcpkg is checking out the files for each version in <code>buildtrees/versioning/versions/</code>. The files in <code>ports/</code> are still used when running vcpkg in classic mode.</p>
<p><em>NOTE: Output from vcpkg while configuring CMake is only available when using CMake version <code>3.18</code> or newer. If you're using an older CMake you can check the <code>vcpkg-manifest-install.log</code> file in your build directory instead.</em></p>
<p>Read our <a href="https://devblogs.microsoft.com/cppblog/vcpkg-accelerate-your-team-development-environment-with-binary-caching-and-manifests/#using-manifests-with-msbuild-projects">manifests announcement blog post</a> to learn how to use manifests with MSBuild.</p>
<h2><a class="anchor" id="autotoc_md3023"></a>
Manifest changes</h2>
<p>If you have used manifests before you will notice that there are some new JSON properties. Let's review these changes:</p>
<h3><a class="anchor" id="autotoc_md3024"></a>
**&lt;tt&gt;version&lt;/tt&gt;**</h3>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;versions-test&quot;,</div>
<div class="line">    &quot;version&quot;: &quot;1.0.0&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p>This is your project's version declaration. Previously, you could only declare versions for your projects using the <code>version-string</code> property. Now that versioning has come around, vcpkg is aware of some new versioning schemes.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Version scheme   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>version</code>   </td><td class="markdownTableBodyNone">Dot-separated numerics: <code>1.0.0.5</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>version-semver</code>   </td><td class="markdownTableBodyNone">Compliant <a href="https://semver.org">semantic versions</a>: <code>1.2.0</code> and <code>1.2.0-rc</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>version-date</code>   </td><td class="markdownTableBodyNone">Dates in <code>YYYY-MM-DD</code> format: <code>2021-01-01</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>version-string</code>   </td><td class="markdownTableBodyNone">Arbitrary strings: <code>vista</code>, <code>candy</code>.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md3025"></a>
**&lt;tt&gt;version&gt;=&lt;/tt&gt;**</h3>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;dependencies&quot;: [</div>
<div class="line">        { &quot;name&quot;: &quot;fmt&quot;, &quot;version&gt;=&quot;: &quot;7.1.3&quot; },</div>
<div class="line">        &quot;zlib&quot;</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>This property is used to express minimum version constraints, it is allowed only as part of the <code>"dependencies"</code> declarations. In our example we set an explicit constraint on version <code>7.1.3#1</code> of <code>fmt</code>.</p>
<p>Vcpkg is allowed to upgrade this constraint if a transitive dependency requires a newer version. For example, if <code>zlib</code> were to declare a dependency on <code>fmt</code> version <code>7.1.4</code> then vcpkg would install <code>7.1.4</code> instead.</p>
<p>Vcpkg uses a minimum version approach, in our example, even if <code>fmt</code> version <code>8.0.0</code> were to be released, vcpkg would still install version <code>7.1.3#1</code> as that is the minimum version that satisfies the constraint. The advantages of this approach are that you don't get unexpected dependency upgrades when you update vcpkg and you get reproducible builds (in terms of version used) as long as you use the same manifest.</p>
<p>If you want to upgrade your dependencies, you can bump the minimum version constraint or use a newer baseline.</p>
<h3><a class="anchor" id="autotoc_md3026"></a>
**&lt;tt&gt;builtin-baseline&lt;/tt&gt;**</h3>
<div class="fragment"><div class="line">{ &quot;builtin-baseline&quot;: &quot;3426db05b996481ca31e95fff3734cf23e0f51bc&quot; }</div>
</div><!-- fragment --><p>This field declares the versioning baseline for all ports. Setting a baseline is required to enable versioning, otherwise you will get the current versions on the ports directory. You can run 'git rev-parse HEAD' to get the current commit of vcpkg and set it as the builtin-baseline. See the <a href="../users/manifests.md#builtin-baseline"><code>builtin-baseline</code> documentation</a> for more information.</p>
<p>In our example, you can notice that we do not declare a version constraint for <code>zlib</code>; instead, the version is taken from the baseline. Internally, vcpkg will look in commit <code>3426db05b996481ca31e95fff3734cf23e0f51bc</code> to find out what version of <code>zlib</code> was the latest at that point in time (in our case it was <code>1.2.11#9</code>).</p>
<p>During version resolution, baseline versions are treated as minimum version constraints. If you declare an explicit constraint that is lower than a baseline version, the explicit constraint will be upgraded to the baseline version.</p>
<p>For example, if we modified our dependencies like this: </p><div class="fragment"><div class="line">{ &quot;dependencies&quot;: [</div>
<div class="line">    {</div>
<div class="line">        &quot;name&quot;: &quot;fmt&quot;,</div>
<div class="line">        &quot;version&gt;=&quot;: &quot;7.1.3#1&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">        &quot;name&quot;: &quot;zlib&quot;,</div>
<div class="line">        &quot;version&gt;=&quot;: &quot;1.2.11#7&quot;</div>
<div class="line">    }</div>
<div class="line">] }</div>
</div><!-- fragment --><p><em>NOTE: The value <code>1.2.11#7</code> represents version <code>1.2.11</code>, port version <code>7</code>.</em></p>
<p>Since the baseline introduces a minimum version constraint for <code>zlib</code> at <code>1.2.11#9</code> and a higher version does satisfy the minimum version constraint for <code>1.2.11#7</code>, vcpkg is allowed to upgrade it.</p>
<p>Baselines are also a convenient mechanism to upgrade multiple versions at a time, for example, if you wanted to depend on multiple <code>boost</code> libraries, it is more convenient to set the <code>baseline</code> once than declaring a version constraint on each package.</p>
<p>But what if you want to pin a version older than the baseline?</p>
<h3><a class="anchor" id="autotoc_md3027"></a>
**&lt;tt&gt;overrides&lt;/tt&gt;**</h3>
<p>Since baselines establish a version floor for all packages and explicit constraints get upgraded when they are lower than the baseline, we need another mechanism to downgrade versions past the baseline.</p>
<p>The mechanism vcpkg provides for that scenario is <code>overrides</code>. When an override is declared on a package, vcpkg will ignore all other version constraints either directly declared in the manifest or from transitive dependencies. In short, <code>overrides</code> will force vcpkg to use the exact version declared, period.</p>
<p>Let's modify our example once more, this time to force vcpkg to use version <code>6.0.0</code> of <code>fmt</code>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;versions-test&quot;,</div>
<div class="line">    &quot;version&quot;: &quot;1.0.0&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;fmt&quot;,</div>
<div class="line">            &quot;version&gt;=&quot;: &quot;7.1.3#1&quot;</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;zlib&quot;,</div>
<div class="line">            &quot;version&gt;=&quot;: &quot;1.2.11#7&quot;</div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    &quot;builtin-baseline&quot;: &quot;3426db05b996481ca31e95fff3734cf23e0f51bc&quot;,</div>
<div class="line">    &quot;overrides&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;fmt&quot;,</div>
<div class="line">            &quot;version&quot;: &quot;6.0.0&quot;</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>Rebuild our project:</p>
<div class="fragment"><div class="line">PS D:\versions-test\build&gt; rm ./CMakeCache.txt</div>
<div class="line">PS D:\versions-test\build&gt; rm -r ./vcpkg_installed</div>
<div class="line">PS D:\versions-test\build&gt; cmake -G Ninja -DCMAKE_TOOLCHAIN_FILE=D:/vcpkg/scripts/buildsystems/vcpkg.cmake ..</div>
<div class="line">-- Running vcpkg install</div>
<div class="line">Detecting compiler hash for triplet x86-windows...</div>
<div class="line">The following packages will be built and installed:</div>
<div class="line">    fmt[core]:x86-windows -&gt; 6.0.0 -- D:\vcpkg\buildtrees\versioning\versions\fmt\d99b6a35e1406ba6b6e09d719bebd086f83ed5f3</div>
<div class="line">    zlib[core]:x86-windows -&gt; 1.2.11#9 -- D:\vcpkg\buildtrees\versioning\versions\zlib\827111046e37c98153d9d82bb6fa4183b6d728e4</div>
<div class="line">...</div>
<div class="line">PS D:\versions-test\build&gt; cmake --build .</div>
<div class="line">[2/2] Linking CXX executable main.exe</div>
</div><!-- fragment --><p>And run it! </p><div class="fragment"><div class="line">PS D:\versions-test\build&gt; .\main.exe</div>
<div class="line">fmt version is 60000</div>
<div class="line">zlib version is 1.2.11</div>
</div><!-- fragment --><p>Notice how the <code>fmt</code> is now at version <code>6.0.0</code> just like we wanted.</p>
<h1><a class="anchor" id="autotoc_md3028"></a>
Versions and custom ports</h1>
<p>The last thing to discuss is how overlay ports interact with versioning resolution. The answer is: they don't.</p>
<p>Going into more detail, when you provide an overlay for a port, vcpkg will always use the overlay port without caring what version is contained in it. The reasons are two-fold: (1) it is consistent with the existing behavior of overlay ports of completely masking the existing port, and (2) overlay ports do not (and are not expected to) provide enough information to power vcpkg's versioning feature.</p>
<p>If you want to have flexible port customization along with versioning, you should consider making your own custom registry. See our <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_specifications_registries.html">registries specification for more details</a>.</p>
<h1><a class="anchor" id="autotoc_md3029"></a>
Further reading</h1>
<p>If you're interested in delving deeper into the details of how versioning works we recommended that you read the <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_specifications_versioning.html">original versioning specification</a> and the <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_users_versioning_implementation_details.html">implementation details</a>.</p>
<p>See also:</p>
<ul>
<li><a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_users_versioning.html">Versioning docs</a></li>
<li><a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_specifications_versioning.html">Original specification</a></li>
<li><a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_users_versioning_implementation_details.html">Versioning implementation details</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
