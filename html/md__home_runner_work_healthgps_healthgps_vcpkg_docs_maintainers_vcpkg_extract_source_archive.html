<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Health-GPS: vcpkg_extract_source_archive</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Health-GPS
   &#160;<span id="projectnumber">1.2.2.0</span>
   </div>
   <div id="projectbrief">Global Health Policy Simulation model (Health-GPS)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_healthgps_healthgps_vcpkg_docs_maintainers_vcpkg_extract_source_archive.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">vcpkg_extract_source_archive </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The latest version of this document lives in the <a href="https://github.com/Microsoft/vcpkg/blob/master/docs/maintainers/vcpkg_extract_source_archive.md">vcpkg repo</a>.</p>
<p>Extract an archive.</p>
<h1><a class="anchor" id="autotoc_md3515"></a>
Usage</h1>
<div class="fragment"><div class="line">vcpkg_extract_source_archive(</div>
<div class="line">    &lt;out-var&gt;</div>
<div class="line">    ARCHIVE &lt;path&gt;</div>
<div class="line">    [NO_REMOVE_ONE_LEVEL]</div>
<div class="line">    [SKIP_PATCH_CHECK]</div>
<div class="line">    [PATCHES &lt;patch&gt;...]</div>
<div class="line">    [SOURCE_BASE &lt;base&gt;]</div>
<div class="line">    [BASE_DIRECTORY &lt;relative-path&gt; | WORKING_DIRECTORY &lt;absolute-path&gt;]</div>
<div class="line">)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3516"></a>
Parameters</h1>
<p><a class="anchor" id="out-var"></a></p>
<h2><a class="anchor" id="autotoc_md3517"></a>
&lt;tt&gt;&lt;out-var&gt;&lt;/tt&gt;</h2>
<p>Name of the variable to set with the directory containing the extracted contents.</p>
<h2><a class="anchor" id="autotoc_md3518"></a>
ARCHIVE</h2>
<p>Full path to the archive to extract.</p>
<h2><a class="anchor" id="autotoc_md3519"></a>
NO_REMOVE_ONE_LEVEL</h2>
<p>Skip removing the top level directory of the archive.</p>
<p>Most archives contain a single top-level directory, such as:</p>
<div class="fragment"><div class="line">zlib-1.2.11/</div>
<div class="line">    doc/</div>
<div class="line">        ...</div>
<div class="line">    examples/</div>
<div class="line">        ...</div>
<div class="line">    ChangeLog</div>
<div class="line">    CMakeLists.txt</div>
<div class="line">    README</div>
<div class="line">    zlib.h</div>
<div class="line">    ...</div>
</div><!-- fragment --><p>By default, <code>vcpkg_extract_source_archive</code> removes this directory and moves all contents into the directory returned in <code>&lt;out-var&gt;</code>. If there is no top-level directory, it is an error.</p>
<p>With this flag, the top-level directory will be preserved and it is not an error to not have one.</p>
<h2><a class="anchor" id="autotoc_md3520"></a>
SKIP_PATCH_CHECK</h2>
<p>Silence and ignore errors when applying patches.</p>
<p>This option should only be passed when operating in an unstable mode like <code>--head</code>. If the sources are pinned, failing to apply a patch should be considered a fatal error.</p>
<h2><a class="anchor" id="autotoc_md3521"></a>
PATCHES</h2>
<p>List of patches to apply to the extracted source.</p>
<p>Patches will be applied in order, after any top-level directories are removed (see <a href="#no_remove_one_level"><code>NO_REMOVE_ONE_LEVEL</code></a>). Relative paths are interpreted relative to the current port directory.</p>
<p>If a patch should be conditionally applied based on target information, you can construct a list and splat it.</p>
<div class="fragment"><div class="line">set(patches &quot;&quot;)</div>
<div class="line">if(VCPKG_TARGET_IS_WINDOWS)</div>
<div class="line">    list(APPEND patches only-windows.patch)</div>
<div class="line">endif()</div>
<div class="line">vcpkg_extract_source_archive(src</div>
<div class="line">    ARCHIVE &quot;${archive}&quot;</div>
<div class="line">    PATCHES</div>
<div class="line">        always-applied.patch</div>
<div class="line">        ${patches}</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3522"></a>
SOURCE_BASE</h2>
<p>Pretty name for the extracted directory.</p>
<p>Must not contain path separators (<code>/</code> or <code>\\</code>).</p>
<p>See <a href="#working_directory"><code>WORKING_DIRECTORY</code></a> for more details.</p>
<h2><a class="anchor" id="autotoc_md3523"></a>
BASE_DIRECTORY</h2>
<p>Root subfolder for the extracted directory.</p>
<p>Defaults to <code>src</code>. Must be a relative path.</p>
<p>See <a href="#working_directory"><code>WORKING_DIRECTORY</code></a> for more details.</p>
<h2><a class="anchor" id="autotoc_md3524"></a>
WORKING_DIRECTORY</h2>
<p>Root folder for the extracted directory.</p>
<p>Defaults to <code>${CURRENT_BUILDTREES_DIR}/&lt;BASE_DIRECTORY&gt;</code>. Must be an absolute path.</p>
<p><code>vcpkg_extract_source_archive</code> extracts the archive into <code>&lt;WORKING_DIRECTORY&gt;/&lt;SOURCE_BASE&gt;-&lt;short-hash&gt;.clean</code>. If the folder exists, it is deleted before extraction. Without specifying <code>SOURCE_BASE</code>, <code>BASE_DIRECTORY</code>, or <code>WORKING_DIRECTORY</code>, this will default to <code>${CURRENT_BUILDTREES_DIR}/src/&lt;archive-stem&gt;-&lt;short-hash&gt;.clean</code>.</p>
<p>In <a href="../commands/install.md#editable"><code>--editable</code></a> mode:</p><ol type="1">
<li>No <code>.clean</code> suffix is added to the extracted folder</li>
<li>The extracted folder is not deleted. If it exists, <code>vcpkg_extract_source_archive</code> does nothing.</li>
</ol>
<p><code>&lt;short-hash&gt;</code> unambiguously identifies a particular set of archive and patch file contents. Any modifications to the contents of the working directory after calling this function should be applied unconditionally in order to avoid unexpected behavior in editable mode.</p>
<h1><a class="anchor" id="autotoc_md3525"></a>
Examples</h1>
<div class="fragment"><div class="line">vcpkg_download_distfile(</div>
<div class="line">    archive # &quot;archive&quot; is set to the path to the downloaded file</div>
<div class="line">    URLS &quot;https://nmap.org/dist/nmap-7.70.tar.bz2&quot;</div>
<div class="line">    FILENAME &quot;nmap-7.70.tar.bz2&quot;</div>
<div class="line">    SHA512 084c148b022ff6550e269d976d0077f7932a10e2ef218236fe13aa3a70b4eb6506df03329868fc68cb3ce78e4360b200f5a7a491d3145028fed679ef1c9ecae5</div>
<div class="line">)</div>
<div class="line">vcpkg_extract_source_archive(</div>
<div class="line">    src # &quot;src&quot; is set to the path to the extracted files</div>
<div class="line">    ARCHIVE &quot;${archive}&quot;</div>
<div class="line">    SOURCE_BASE nmap.org-nmap-7.70</div>
<div class="line">    PATCHES</div>
<div class="line">        0001-disable-werror.patch</div>
<div class="line">)</div>
<div class="line">vcpkg_cmake_configure(SOURCE_PATH &quot;${src}&quot;)</div>
</div><!-- fragment --><ul>
<li><a href="https://github.com/microsoft/vcpkg/search?q=vcpkg_extract_source_archive+path%3A%2Fports">GitHub Search</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md3526"></a>
Remarks</h1>
<p><b>Deprecated Syntax</b></p>
<p>This command also supports a deprecated overload:</p>
<div class="fragment"><div class="line">vcpkg_extract_source_archive(&lt;archive&gt; [&lt;working_directory&gt;])</div>
</div><!-- fragment --><p>The deprecated overload extracts <code>&lt;archive&gt;</code> into <code>${working_directory}/&lt;archive-filename&gt;.extracted</code> if the target does not exist. This incorrect behavior allows patches and other modifications to leak between different builds, resulting in hard-to-debug errors.</p>
<p>All uses of the deprecated overload should be replaced with the syntax in <a href="#usage">Usage</a> above by adding an explicit <a href="#archive"><code>ARCHIVE</code></a> parameter and replacing direct references to the extracted path with uses of the <a href="#out-var"><code>&lt;out-var&gt;</code></a>.</p>
<p><b>Replacement</b></p>
<p>This command replaces <a class="el" href="md__home_runner_work_healthgps_healthgps_vcpkg_docs_maintainers_vcpkg_extract_source_archive_ex.html">`vcpkg_extract_source_archive_ex()`</a>.</p>
<h1><a class="anchor" id="autotoc_md3527"></a>
Source</h1>
<p><a href="https://github.com/Microsoft/vcpkg/blob/master/scripts/cmake/vcpkg_extract_source_archive.cmake">scripts/cmake/vcpkg_extract_source_archive.cmake</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
